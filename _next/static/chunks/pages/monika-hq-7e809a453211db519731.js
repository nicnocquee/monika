_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[15],{"7bRn":function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/monika-hq",function(){return a("Fz0i")}])},Fz0i:function(e,t,a){"use strict";a.r(t),a.d(t,"meta",(function(){return c})),a.d(t,"default",(function(){return m}));var n=a("wx14"),i=a("Ff2n"),l=a("q1tI"),o=a.n(l),r=a("7ljp"),b=a("er9C"),c=(o.a.createElement,{id:"monika-hq",title:"Monika-HQ"}),s={meta:c},p=function(e){var t=e.children,a=Object(i.a)(e,["children"]);return Object(r.b)(b.a,Object(n.a)({meta:c},a),t)};function m(e){var t=e.components,a=Object(i.a)(e,["components"]);return Object(r.b)(p,Object(n.a)({},s,a,{components:t,mdxType:"MDXLayout"}),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"monika-hq")," is a web app to manage multiple instances of Monika locally and remotely. "),Object(r.b)("img",{src:"/monika/monika-hq.png",alt:null}),Object(r.b)("h2",{id:"getting-started"},"Getting started",Object(r.b)("a",{parentName:"h2",href:"#getting-started",title:"Direct link to heading",className:"anchor"},Object(r.b)("span",{parentName:"a",className:"icon icon-link"}))),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},"Install monika-hq: ",Object(r.b)("inlineCode",{parentName:"li"},"npm i -g @hyperjumptech/monika-hq")),Object(r.b)("li",{parentName:"ol"},"Run in port 8080: ",Object(r.b)("inlineCode",{parentName:"li"},"monika-hq -p 8080")),Object(r.b)("li",{parentName:"ol"},"Open browser and go to http://<IP_OF_MONIKA_HQ>:8080"),Object(r.b)("li",{parentName:"ol"},"Create a Monika API Key. Provide a ",Object(r.b)("inlineCode",{parentName:"li"},"name")," and then click ",Object(r.b)("inlineCode",{parentName:"li"},"Generate"),".")),Object(r.b)("p",null,"Next, we need to run Monika with the ",Object(r.b)("inlineCode",{parentName:"p"},"monika-hq"),"'s URL and the generated key as follows."),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Update Monika's config.json with the generated key as follows"),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",{parentName:"pre",className:"language-json"},'{\n    "monika-hq": {\n        "url": "MONIT_HQ_URL",\n        "key": "GENERATED_KEY"\n    }\n}\n'))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"Run ",Object(r.b)("inlineCode",{parentName:"p"},"monika -c config.json"),"."))),Object(r.b)("p",null,"Now Monika will regularly send reports to Monika-HQ. Then you can see the report from the Monika-HQ web app."),Object(r.b)("h2",{id:"features"},"Features",Object(r.b)("a",{parentName:"h2",href:"#features",title:"Direct link to heading",className:"anchor"},Object(r.b)("span",{parentName:"a",className:"icon icon-link"}))),Object(r.b)("h3",{id:"probes-list"},"Probes List",Object(r.b)("a",{parentName:"h3",href:"#probes-list",title:"Direct link to heading",className:"anchor"},Object(r.b)("span",{parentName:"a",className:"icon icon-link"}))),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Show list of probes from all Monika instances",Object(r.b)("ul",{parentName:"li"},Object(r.b)("li",{parentName:"ul"},"Filter by Monika instance"),Object(r.b)("li",{parentName:"ul"},"Same Probe's URL is shown once. "),Object(r.b)("li",{parentName:"ul"},"Search by URL"),Object(r.b)("li",{parentName:"ul"},"Shows the status of each probes (healthy or unhealthy)"))),Object(r.b)("li",{parentName:"ul"},"Enable or disable a probe")),Object(r.b)("h3",{id:"probes-status--report"},"Probe's Status / Report",Object(r.b)("a",{parentName:"h3",href:"#probes-status--report",title:"Direct link to heading",className:"anchor"},Object(r.b)("span",{parentName:"a",className:"icon icon-link"}))),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Show response time of the probe: average, slowest, fastest."),Object(r.b)("li",{parentName:"ul"},"Uptime/Downtime in percentage."),Object(r.b)("li",{parentName:"ul"},"Response time graph for the last two weeks. There is a dropdown to select which instance to display."),Object(r.b)("li",{parentName:"ul"},"Latest failed checks: date, time, and the Monika instance"),Object(r.b)("li",{parentName:"ul"},"Change probe's request: URL, method, headers"),Object(r.b)("li",{parentName:"ul"},"Change probe's interval"),Object(r.b)("li",{parentName:"ul"},"Change probe's trueThreshold and falseThreshold")),Object(r.b)("h3",{id:"monika-api-keys"},"Monika API Keys",Object(r.b)("a",{parentName:"h3",href:"#monika-api-keys",title:"Direct link to heading",className:"anchor"},Object(r.b)("span",{parentName:"a",className:"icon icon-link"}))),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Create new key"),Object(r.b)("li",{parentName:"ul"},"Disable a key"),Object(r.b)("li",{parentName:"ul"},"Delete a key"),Object(r.b)("li",{parentName:"ul"},"Show list of keys: Instances of Monika that are using the key and when it was last used.")),Object(r.b)("h3",{id:"monika-instances"},"Monika Instances",Object(r.b)("a",{parentName:"h3",href:"#monika-instances",title:"Direct link to heading",className:"anchor"},Object(r.b)("span",{parentName:"a",className:"icon icon-link"}))),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Show list of connected Monika instances"),Object(r.b)("li",{parentName:"ul"},"Configure an instance of Monika:",Object(r.b)("ul",{parentName:"li"},Object(r.b)("li",{parentName:"ul"},"Update notification settings"),Object(r.b)("li",{parentName:"ul"},"Add notification"),Object(r.b)("li",{parentName:"ul"},"Remove/disable notification")))),Object(r.b)("h2",{id:"how-it-works"},"How it works",Object(r.b)("a",{parentName:"h2",href:"#how-it-works",title:"Direct link to heading",className:"anchor"},Object(r.b)("span",{parentName:"a",className:"icon icon-link"}))),Object(r.b)("h3",{id:"report-flow"},"Report Flow",Object(r.b)("a",{parentName:"h3",href:"#report-flow",title:"Direct link to heading",className:"anchor"},Object(r.b)("span",{parentName:"a",className:"icon icon-link"}))),Object(r.b)("p",null,"When Monika is started with the ",Object(r.b)("inlineCode",{parentName:"p"},"--hq-url")," and ",Object(r.b)("inlineCode",{parentName:"p"},"--hq-key")," flags, it will regularly do the Report Flow as follows"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"create an archive of the data since last report ")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"calls ",Object(r.b)("inlineCode",{parentName:"p"},"<MONIKA_HQ_URL>/api/report")," end point regularly (default every 3 minutes) with "),Object(r.b)("ul",{parentName:"li"},Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"HTTP method: POST")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"Content type: ",Object(r.b)("inlineCode",{parentName:"p"},"multipart/form-data"))),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"Body:"),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",{parentName:"pre",className:"language-json"},'{\n    "monika": {\n        "id": "some_uuid",\n        "ip_address": "this-instance-ip",\n    },\n    "notifications": {\n        // this monika\'s notification config\n    },\n    "probes": [\n        // this monika\'s probes\n    ],\n}\n'))),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"Attachments: the events data")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"Header:"),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",{parentName:"pre"},"headers: {\n    Authorization: Bearer <API_KEY>\n}\n"))))),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"monika-hq sends response"),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",{parentName:"pre",className:"language-json"},'{\n    "result": "ok"\n}\n')),Object(r.b)("p",{parentName:"li"},"  when configuration that is saved in monika-hq is the same with the one sent by the Monika instance."),Object(r.b)("p",{parentName:"li"},"  If the configuration is different (user has changed say URL, notifications, etc from the Monika-HQ web app), it will send a response:"),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",{parentName:"pre",className:"language-json"},'{\n    "result": "updated",\n    "data": {\n        "probes": [\n            // new probes\n        ],\n        "notifications": [\n            // new notifications\n        ]\n    }\n}\n'))),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"Monika then will update its own configuration if needed."))),Object(r.b)("h3",{id:"on-incidentrecovery"},"On Incident/Recovery",Object(r.b)("a",{parentName:"h3",href:"#on-incidentrecovery",title:"Direct link to heading",className:"anchor"},Object(r.b)("span",{parentName:"a",className:"icon icon-link"}))),Object(r.b)("p",null,"When an incident occurs, e.g., ",Object(r.b)("inlineCode",{parentName:"p"},"status-not-2xx")," is triggered 5 times (or the threshhold) in a row, and Monika is started with the ",Object(r.b)("inlineCode",{parentName:"p"},"--hq-url")," and ",Object(r.b)("inlineCode",{parentName:"p"},"--hq-key")," flags, Monika will call the ",Object(r.b)("inlineCode",{parentName:"p"},"<MONIKA_HQ_URL>/api/report")," end point just like how it goes in the regular report cycle."),Object(r.b)("p",null,"Same goes when a probe recovers from incident."))}m.isMDXComponent=!0}},[["7bRn",0,2,4,1,3,5]]]);